[gd_scene load_steps=10 format=3 uid="uid://8fi20pxoff6i"]

[ext_resource type="Script" path="res://scenes/scripts/display.gd" id="3_8hwfk"]
[ext_resource type="Script" path="res://scenes/scripts/keypad.gd" id="4_82j2o"]
[ext_resource type="Script" path="res://scenes/cpu/chip_8.gd" id="4_x8ixd"]
[ext_resource type="AudioStream" uid="uid://bmjo582yh63jw" path="res://assets/sound/beep.ogg" id="5_03kvt"]
[ext_resource type="Script" path="res://scenes/cpu/clock.gd" id="6_mfduj"]
[ext_resource type="Script" path="res://scenes/cpu/control_unit.gd" id="7_l2uid"]
[ext_resource type="Resource" uid="uid://bp3u0my8pjgxl" path="res://resources/ram.tres" id="8_arboy"]
[ext_resource type="Script" path="res://scenes/cpu/instruction_set.gd" id="8_p4xvt"]

[sub_resource type="ImageTexture" id="ImageTexture_wpv0w"]

[node name="CHIP-8" type="Node"]

[node name="Display" type="TextureRect" parent="."]
texture_filter = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
texture = SubResource("ImageTexture_wpv0w")
script = ExtResource("3_8hwfk")
width = 64
height = 32

[node name="Beeper" type="AudioStreamPlayer" parent="."]
stream = ExtResource("5_03kvt")
volume_db = -80.0

[node name="Keypad" type="Node" parent="."]
script = ExtResource("4_82j2o")

[node name="CPU" type="Node" parent="." node_paths=PackedStringArray("clock")]
process_thread_group = 2
process_thread_group_order = 0
process_thread_messages = 0
script = ExtResource("4_x8ixd")
rom = "res://roms/revival-studios/games/Pong (1 player).ch8"
ram = ExtResource("8_arboy")
clock = NodePath("Clock")

[node name="Clock" type="Node" parent="CPU"]
script = ExtResource("6_mfduj")
clockspeed = 1000.0

[node name="ControlUnit" type="Node" parent="CPU" node_paths=PackedStringArray("display", "clock", "keypad")]
script = ExtResource("7_l2uid")
instruction_set = ExtResource("8_p4xvt")
display = NodePath("../../Display")
clock = NodePath("../Clock")
keypad = NodePath("../../Keypad")
ram = ExtResource("8_arboy")
